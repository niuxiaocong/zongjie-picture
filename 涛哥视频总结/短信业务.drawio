<mxfile host="app.diagrams.net" modified="2023-12-01T03:23:31.936Z" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36" etag="Fb6KxGOHRlykkuLE54EK" version="22.1.5" type="github">
  <diagram name="第 1 页" id="_qX5vx0WwaKs6z4QW6X0">
    <mxGraphModel dx="1235" dy="580" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="xJZYCLzQnUPLsRXWI5wK-3" value="api&lt;br&gt;SmsSendRegisterController" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&quot;curved&quot;:0,&quot;rounded&quot;:0};" parent="1" vertex="1">
          <mxGeometry x="326" y="280" width="240" height="960" as="geometry" />
        </mxCell>
        <mxCell id="pcIeQBHsXcDPj8eYiK2b-9" value="" style="html=1;points=[[0,0,0,0,5],[0,1,0,0,-5],[1,0,0,0,5],[1,1,0,0,-5]];perimeter=orthogonalPerimeter;outlineConnect=0;targetShapes=umlLifeline;portConstraint=eastwest;newEdgeStyle={&quot;curved&quot;:0,&quot;rounded&quot;:0};" vertex="1" parent="xJZYCLzQnUPLsRXWI5wK-3">
          <mxGeometry x="115" y="75" width="10" height="105" as="geometry" />
        </mxCell>
        <mxCell id="pcIeQBHsXcDPj8eYiK2b-44" value="" style="html=1;points=[[0,0,0,0,5],[0,1,0,0,-5],[1,0,0,0,5],[1,1,0,0,-5]];perimeter=orthogonalPerimeter;outlineConnect=0;targetShapes=umlLifeline;portConstraint=eastwest;newEdgeStyle={&quot;curved&quot;:0,&quot;rounded&quot;:0};" vertex="1" parent="xJZYCLzQnUPLsRXWI5wK-3">
          <mxGeometry x="115" y="721" width="10" height="39" as="geometry" />
        </mxCell>
        <mxCell id="pcIeQBHsXcDPj8eYiK2b-48" value="" style="html=1;points=[[0,0,0,0,5],[0,1,0,0,-5],[1,0,0,0,5],[1,1,0,0,-5]];perimeter=orthogonalPerimeter;outlineConnect=0;targetShapes=umlLifeline;portConstraint=eastwest;newEdgeStyle={&quot;curved&quot;:0,&quot;rounded&quot;:0};" vertex="1" parent="xJZYCLzQnUPLsRXWI5wK-3">
          <mxGeometry x="115" y="800" width="10" height="60" as="geometry" />
        </mxCell>
        <mxCell id="pcIeQBHsXcDPj8eYiK2b-59" value="" style="html=1;points=[[0,0,0,0,5],[0,1,0,0,-5],[1,0,0,0,5],[1,1,0,0,-5]];perimeter=orthogonalPerimeter;outlineConnect=0;targetShapes=umlLifeline;portConstraint=eastwest;newEdgeStyle={&quot;curved&quot;:0,&quot;rounded&quot;:0};" vertex="1" parent="xJZYCLzQnUPLsRXWI5wK-3">
          <mxGeometry x="115" y="280" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="xJZYCLzQnUPLsRXWI5wK-18" value="" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&quot;curved&quot;:0,&quot;rounded&quot;:0};participant=umlActor;" parent="1" vertex="1">
          <mxGeometry x="166" y="280" width="20" height="960" as="geometry" />
        </mxCell>
        <mxCell id="pcIeQBHsXcDPj8eYiK2b-54" value="" style="html=1;points=[[0,0,0,0,5],[0,1,0,0,-5],[1,0,0,0,5],[1,1,0,0,-5]];perimeter=orthogonalPerimeter;outlineConnect=0;targetShapes=umlLifeline;portConstraint=eastwest;newEdgeStyle={&quot;curved&quot;:0,&quot;rounded&quot;:0};" vertex="1" parent="xJZYCLzQnUPLsRXWI5wK-18">
          <mxGeometry x="4" y="120" width="10" height="65" as="geometry" />
        </mxCell>
        <mxCell id="pcIeQBHsXcDPj8eYiK2b-57" value="" style="html=1;points=[[0,0,0,0,5],[0,1,0,0,-5],[1,0,0,0,5],[1,1,0,0,-5]];perimeter=orthogonalPerimeter;outlineConnect=0;targetShapes=umlLifeline;portConstraint=eastwest;newEdgeStyle={&quot;curved&quot;:0,&quot;rounded&quot;:0};" vertex="1" parent="xJZYCLzQnUPLsRXWI5wK-18">
          <mxGeometry x="4" y="740" width="10" height="39" as="geometry" />
        </mxCell>
        <mxCell id="pcIeQBHsXcDPj8eYiK2b-61" value="" style="html=1;points=[[0,0,0,0,5],[0,1,0,0,-5],[1,0,0,0,5],[1,1,0,0,-5]];perimeter=orthogonalPerimeter;outlineConnect=0;targetShapes=umlLifeline;portConstraint=eastwest;newEdgeStyle={&quot;curved&quot;:0,&quot;rounded&quot;:0};" vertex="1" parent="xJZYCLzQnUPLsRXWI5wK-18">
          <mxGeometry x="4" y="310" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="xJZYCLzQnUPLsRXWI5wK-19" value="module&lt;br&gt;VerifyCodeServer" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&quot;curved&quot;:0,&quot;rounded&quot;:0};" parent="1" vertex="1">
          <mxGeometry x="726" y="280" width="200" height="960" as="geometry" />
        </mxCell>
        <mxCell id="pcIeQBHsXcDPj8eYiK2b-15" value="" style="html=1;points=[[0,0,0,0,5],[0,1,0,0,-5],[1,0,0,0,5],[1,1,0,0,-5]];perimeter=orthogonalPerimeter;outlineConnect=0;targetShapes=umlLifeline;portConstraint=eastwest;newEdgeStyle={&quot;curved&quot;:0,&quot;rounded&quot;:0};" vertex="1" parent="xJZYCLzQnUPLsRXWI5wK-19">
          <mxGeometry x="95" y="130" width="10" height="150" as="geometry" />
        </mxCell>
        <mxCell id="pcIeQBHsXcDPj8eYiK2b-25" value="" style="html=1;points=[[0,0,0,0,5],[0,1,0,0,-5],[1,0,0,0,5],[1,1,0,0,-5]];perimeter=orthogonalPerimeter;outlineConnect=0;targetShapes=umlLifeline;portConstraint=eastwest;newEdgeStyle={&quot;curved&quot;:0,&quot;rounded&quot;:0};" vertex="1" parent="xJZYCLzQnUPLsRXWI5wK-19">
          <mxGeometry x="96" y="329" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="pcIeQBHsXcDPj8eYiK2b-26" value="生成验证码" style="html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;edgeStyle=orthogonalEdgeStyle;curved=0;rounded=0;" edge="1" parent="xJZYCLzQnUPLsRXWI5wK-19">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="101" y="316" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="131" y="346" />
            </Array>
            <mxPoint x="106" y="346" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="pcIeQBHsXcDPj8eYiK2b-28" value="" style="html=1;points=[[0,0,0,0,5],[0,1,0,0,-5],[1,0,0,0,5],[1,1,0,0,-5]];perimeter=orthogonalPerimeter;outlineConnect=0;targetShapes=umlLifeline;portConstraint=eastwest;newEdgeStyle={&quot;curved&quot;:0,&quot;rounded&quot;:0};" vertex="1" parent="xJZYCLzQnUPLsRXWI5wK-19">
          <mxGeometry x="96" y="390" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="pcIeQBHsXcDPj8eYiK2b-41" value="" style="html=1;points=[[0,0,0,0,5],[0,1,0,0,-5],[1,0,0,0,5],[1,1,0,0,-5]];perimeter=orthogonalPerimeter;outlineConnect=0;targetShapes=umlLifeline;portConstraint=eastwest;newEdgeStyle={&quot;curved&quot;:0,&quot;rounded&quot;:0};" vertex="1" parent="xJZYCLzQnUPLsRXWI5wK-19">
          <mxGeometry x="96" y="649" width="10" height="191" as="geometry" />
        </mxCell>
        <mxCell id="xJZYCLzQnUPLsRXWI5wK-20" value="腾讯云" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&quot;curved&quot;:0,&quot;rounded&quot;:0};" parent="1" vertex="1">
          <mxGeometry x="1376" y="290.65" width="120" height="789.35" as="geometry" />
        </mxCell>
        <mxCell id="pcIeQBHsXcDPj8eYiK2b-35" value="" style="html=1;points=[[0,0,0,0,5],[0,1,0,0,-5],[1,0,0,0,5],[1,1,0,0,-5]];perimeter=orthogonalPerimeter;outlineConnect=0;targetShapes=umlLifeline;portConstraint=eastwest;newEdgeStyle={&quot;curved&quot;:0,&quot;rounded&quot;:0};" vertex="1" parent="xJZYCLzQnUPLsRXWI5wK-20">
          <mxGeometry x="55" y="499.35483870967744" width="10" height="80" as="geometry" />
        </mxCell>
        <mxCell id="xJZYCLzQnUPLsRXWI5wK-21" value="module&lt;br&gt;SmsServer" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&quot;curved&quot;:0,&quot;rounded&quot;:0};" parent="1" vertex="1">
          <mxGeometry x="1090" y="280" width="120" height="800" as="geometry" />
        </mxCell>
        <mxCell id="pcIeQBHsXcDPj8eYiK2b-31" value="" style="html=1;points=[[0,0,0,0,5],[0,1,0,0,-5],[1,0,0,0,5],[1,1,0,0,-5]];perimeter=orthogonalPerimeter;outlineConnect=0;targetShapes=umlLifeline;portConstraint=eastwest;newEdgeStyle={&quot;curved&quot;:0,&quot;rounded&quot;:0};" vertex="1" parent="xJZYCLzQnUPLsRXWI5wK-21">
          <mxGeometry x="55" y="430" width="10" height="90" as="geometry" />
        </mxCell>
        <mxCell id="pcIeQBHsXcDPj8eYiK2b-39" value="" style="html=1;points=[[0,0,0,0,5],[0,1,0,0,-5],[1,0,0,0,5],[1,1,0,0,-5]];perimeter=orthogonalPerimeter;outlineConnect=0;targetShapes=umlLifeline;portConstraint=eastwest;newEdgeStyle={&quot;curved&quot;:0,&quot;rounded&quot;:0};" vertex="1" parent="xJZYCLzQnUPLsRXWI5wK-21">
          <mxGeometry x="55" y="580" width="10" height="80" as="geometry" />
        </mxCell>
        <mxCell id="pcIeQBHsXcDPj8eYiK2b-2" value="Client" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="145" y="240" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="pcIeQBHsXcDPj8eYiK2b-3" value="" style="endArrow=classic;html=1;rounded=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="177" y="360" as="sourcePoint" />
            <mxPoint x="440" y="360" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="pcIeQBHsXcDPj8eYiK2b-4" value="点击发送验证码" style="edgeLabel;resizable=0;html=1;align=center;verticalAlign=middle;rotation=0;" connectable="0" vertex="1" parent="pcIeQBHsXcDPj8eYiK2b-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="pcIeQBHsXcDPj8eYiK2b-14" value="设置业务短信业务类型（注册）" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="458" y="336" width="92" height="30" as="geometry" />
        </mxCell>
        <mxCell id="pcIeQBHsXcDPj8eYiK2b-20" value="" style="endArrow=classic;html=1;rounded=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="451" y="416" as="sourcePoint" />
            <mxPoint x="820" y="416" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="pcIeQBHsXcDPj8eYiK2b-21" value="手机号未注册" style="edgeLabel;resizable=0;html=1;align=center;verticalAlign=middle;rotation=0;" connectable="0" vertex="1" parent="pcIeQBHsXcDPj8eYiK2b-20">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="pcIeQBHsXcDPj8eYiK2b-22" value="设置安全校验&lt;br&gt;1、防抖点击校验，3秒内频繁点击，给出提示信息。点击太快请稍后重试&lt;br&gt;2、验证当前用户是否已经发送过短信&lt;br&gt;3、短信防刷校验，校验的维度有当天用户、手机号、ip、系统发送量限制" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="840" y="420" width="240" height="120" as="geometry" />
        </mxCell>
        <mxCell id="pcIeQBHsXcDPj8eYiK2b-30" value="生成一条验证码记录并保存，初始状态是INIT等待验证" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="840" y="669" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="pcIeQBHsXcDPj8eYiK2b-32" value="" style="endArrow=classic;html=1;rounded=0;" edge="1" parent="1" target="xJZYCLzQnUPLsRXWI5wK-21">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="827" y="710" as="sourcePoint" />
            <mxPoint x="1104.5" y="710" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="pcIeQBHsXcDPj8eYiK2b-33" value="调用sms" style="edgeLabel;resizable=0;html=1;align=center;verticalAlign=middle;rotation=0;" connectable="0" vertex="1" parent="pcIeQBHsXcDPj8eYiK2b-32">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="pcIeQBHsXcDPj8eYiK2b-34" value="1、保存短信的发送记录&lt;br&gt;2、根据业务类型拿到短信模板id，模板参数" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1160" y="713" width="150" height="57" as="geometry" />
        </mxCell>
        <mxCell id="pcIeQBHsXcDPj8eYiK2b-36" value="调用腾讯云服务" style="html=1;verticalAlign=bottom;endArrow=block;curved=0;rounded=0;entryX=0;entryY=0;entryDx=0;entryDy=5;" edge="1" target="pcIeQBHsXcDPj8eYiK2b-35" parent="1" source="pcIeQBHsXcDPj8eYiK2b-31">
          <mxGeometry x="0.0018" relative="1" as="geometry">
            <mxPoint x="1361" y="795" as="sourcePoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="pcIeQBHsXcDPj8eYiK2b-37" value="腾讯云返回回调信息" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;curved=0;rounded=0;exitX=0;exitY=1;exitDx=0;exitDy=-5;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1156" y="865" as="targetPoint" />
            <mxPoint x="1427" y="865" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="pcIeQBHsXcDPj8eYiK2b-40" value="1、根据回调结果，更新短信记录的状态&lt;br&gt;2、记录发送的条数" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1166" y="880" width="150" height="57" as="geometry" />
        </mxCell>
        <mxCell id="pcIeQBHsXcDPj8eYiK2b-42" value="腾讯云返回回调信息" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;curved=0;rounded=0;exitX=0;exitY=1;exitDx=0;exitDy=-5;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="831.5" y="940" as="targetPoint" />
            <mxPoint x="1147" y="940" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="pcIeQBHsXcDPj8eYiK2b-43" value="1、腾讯云调用失败，验证码的状态更新成失效的状态" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="840" y="950" width="150" height="57" as="geometry" />
        </mxCell>
        <mxCell id="pcIeQBHsXcDPj8eYiK2b-45" value="调用失败抛出异常信息：短信发送失败" style="html=1;verticalAlign=bottom;endArrow=block;curved=0;rounded=0;entryX=1;entryY=0;entryDx=0;entryDy=5;dashed=1;" edge="1" target="pcIeQBHsXcDPj8eYiK2b-44" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="820" y="1006" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="pcIeQBHsXcDPj8eYiK2b-50" value="短信发送成功" style="html=1;verticalAlign=bottom;endArrow=block;curved=0;rounded=0;entryX=1;entryY=0;entryDx=0;entryDy=5;dashed=1;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="821" y="1081" as="sourcePoint" />
            <mxPoint x="452" y="1081" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="pcIeQBHsXcDPj8eYiK2b-51" value="短信发送成功" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="845" y="1080" width="150" height="47" as="geometry" />
        </mxCell>
        <mxCell id="pcIeQBHsXcDPj8eYiK2b-52" value="判断手机号是否已经注册" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="458" y="370" width="92" height="30" as="geometry" />
        </mxCell>
        <mxCell id="pcIeQBHsXcDPj8eYiK2b-55" value="向用户返回提示信息，该手机号已注册" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;curved=0;rounded=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="440" y="400" as="sourcePoint" />
            <mxPoint x="181" y="400" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="pcIeQBHsXcDPj8eYiK2b-56" value="设置用户id、iso、业务类型、ip" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="454" y="423" width="116" height="30" as="geometry" />
        </mxCell>
        <mxCell id="pcIeQBHsXcDPj8eYiK2b-58" value="调用失败抛出异常信息：短信发送失败" style="html=1;verticalAlign=bottom;endArrow=block;curved=0;rounded=0;entryX=1;entryY=0;entryDx=0;entryDy=5;dashed=1;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="440" y="1040" as="sourcePoint" />
            <mxPoint x="181" y="1040" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="pcIeQBHsXcDPj8eYiK2b-60" value="安全校验如果没有通过，则回给用户提示信息" style="html=1;verticalAlign=bottom;endArrow=block;curved=0;rounded=0;entryX=1;entryY=0;entryDx=0;entryDy=5;dashed=1;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="823" y="560" as="sourcePoint" />
            <mxPoint x="454" y="560" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="pcIeQBHsXcDPj8eYiK2b-62" value="向用户返回提示信息" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;curved=0;rounded=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="439" y="600" as="sourcePoint" />
            <mxPoint x="180" y="600" as="targetPoint" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
